"use strict";

const postOrderRequest = {
  cartId: "211010829464",
  lines: [
    {
      lineId: "a8ad017e-ab65-4b1f-b976-24d6af26f53b",
      lmCode: "12627652",
      quantity: 17,
      price: 21,
      type: "PRODUCT",
      isAVS: false,
      topEM: false,
      selected: false,
      title: "Прокладка Equation, 1/2",
      barCodes: ["4680006670610"],
      priceUnit: "EA",
      logisticGrossWeight: 0.007,
      images: [
        "https://res.cloudinary.com/lmru/image/upload/LMCode/12627652.jpg",
      ],
      availableStock: 295,
      stockAdditionBySalesman: 0,
      reasonsForChangeGroup: null,
      barCode: "4680006670610",
      departmentId: "8",
      logistic: {
        weight: 0.007,
      },
      isComplementary: false,
      altPrice: null,
      altPriceUnit: null,
      recommendedPrice: 25,
      priceCurrency: "RUR",
    },
    {
      lineId: "9fb7a427-e2f0-46b8-8bd7-64972bd4527c",
      lmCode: "82291405",
      quantity: 12,
      price: 150,
      type: "PRODUCT",
      isAVS: false,
      topEM: false,
      selected: false,
      title: "Герметик акриловый Axton для стен и окон цвет белый 280 мл",
      barCodes: ["3276000709145"],
      priceUnit: "EA",
      logisticGrossWeight: 0.511,
      images: [
        "https://res.cloudinary.com/lmru/image/upload/LMCode/82291405.jpg",
      ],
      availableStock: 31,
      stockAdditionBySalesman: 0,
      reasonsForChangeGroup: null,
      barCode: "3276000709145",
      departmentId: "11",
      logistic: {
        weight: 0.511,
      },
      isComplementary: false,
      altPrice: 535.714285714286,
      altPriceUnit: "L",
      recommendedPrice: 150,
      priceCurrency: "RUR",
    },
    {
      lineId: "5a506a07-bac9-425b-9e35-61e890709cdb",
      lmCode: "82291547",
      quantity: 2,
      price: 178,
      type: "PRODUCT",
      isAVS: false,
      topEM: false,
      selected: false,
      title: "Герметик для дерева Axton акриловый цвет клен/ясень 280 мл",
      barCodes: ["3276000710264"],
      priceUnit: "EA",
      logisticGrossWeight: 0.512,
      images: [
        "https://res.cloudinary.com/lmru/image/upload/LMCode/82291547.jpg",
      ],
      availableStock: 32,
      stockAdditionBySalesman: 0,
      reasonsForChangeGroup: null,
      barCode: "3276000710264",
      departmentId: "11",
      logistic: {
        weight: 0.512,
      },
      isComplementary: false,
      altPrice: 635.714285714286,
      altPriceUnit: "L",
      recommendedPrice: 178,
      priceCurrency: "RUR",
    },
    {
      lineId: "3e82359e-36ae-45cc-ae7a-c27ca66b7379",
      lmCode: "82232170",
      quantity: 2,
      price: 213,
      type: "PRODUCT",
      isAVS: false,
      topEM: false,
      selected: false,
      title:
        "STANDERS Саморез гипсокартон-дерево, фосфатированный, 3.5Х55, упаковка 200 шт.",
      barCodes: ["3276000682103"],
      priceUnit: "EA",
      logisticGrossWeight: 0.508,
      images: [
        "https://res.cloudinary.com/lmru/image/upload/LMCode/82232170.jpg",
      ],
      availableStock: 39,
      stockAdditionBySalesman: 0,
      reasonsForChangeGroup: null,
      barCode: "3276000682103",
      departmentId: "10",
      logistic: {
        weight: 0.508,
      },
      isComplementary: false,
      altPrice: null,
      altPriceUnit: null,
      recommendedPrice: 270,
      priceCurrency: "RUR",
    },
    {
      lineId: "de5ca1ae-ccf7-441e-92b0-0b45f8756e24",
      lmCode: "82699644",
      quantity: 2,
      price: 194,
      type: "PRODUCT",
      isAVS: false,
      topEM: false,
      selected: false,
      title:
        "Саморезы для деревянного домостроения конструкционные 4Х70 упаковка 75 штук",
      barCodes: ["4606700148194"],
      priceUnit: "EA",
      logisticGrossWeight: 0.292,
      images: [
        "https://res.cloudinary.com/lmru/image/upload/LMCode/82699644.jpg",
      ],
      availableStock: 2,
      stockAdditionBySalesman: 0,
      reasonsForChangeGroup: null,
      barCode: "4606700148194",
      departmentId: "10",
      logistic: {
        weight: 0.292,
      },
      isComplementary: false,
      altPrice: null,
      altPriceUnit: null,
      recommendedPrice: 194,
      priceCurrency: "RUR",
    },
    {
      lineId: "3ab1932f-c97a-4194-9c1b-6d8f37a685ff",
      lmCode: "82239655",
      quantity: 3,
      price: 276,
      type: "PRODUCT",
      isAVS: false,
      topEM: false,
      selected: false,
      title:
        "STANDERS Саморез гипсокартон-дерево, фосфатированный, 3.5Х35, на вес (около 568 шт./кг)",
      barCodes: ["3276000682226"],
      priceUnit: "KG",
      logisticGrossWeight: 1,
      images: [
        "https://res.cloudinary.com/lmru/image/upload/LMCode/82239655.jpg",
      ],
      availableStock: 23.433,
      stockAdditionBySalesman: 0,
      reasonsForChangeGroup: null,
      barCode: "3276000682226",
      departmentId: "10",
      logistic: {
        weight: 1,
      },
      isComplementary: false,
      altPrice: 276,
      altPriceUnit: "KG",
      recommendedPrice: 330,
      priceCurrency: "RUR",
    },
    {
      lineId: "6c3625da-e059-4314-ac35-ca42190daa94",
      lmCode: "81944738",
      quantity: 3,
      price: 1304,
      type: "PRODUCT",
      isAVS: false,
      topEM: false,
      selected: false,
      title: "Дюбель-гвоздь гриб Standers 6x40 мм, нейлон, 500 шт.",
      barCodes: ["3276000375685"],
      priceUnit: "EA",
      logisticGrossWeight: 1.678,
      images: [
        "https://res.cloudinary.com/lmru/image/upload/LMCode/81944738.jpg",
      ],
      availableStock: 17,
      stockAdditionBySalesman: 0,
      reasonsForChangeGroup: null,
      barCode: "3276000375685",
      departmentId: "10",
      logistic: {
        weight: 1.678,
      },
      isComplementary: false,
      altPrice: null,
      altPriceUnit: null,
      recommendedPrice: 1304,
      priceCurrency: "RUR",
    },
    {
      lineId: "b7f60c7b-2aff-40ab-896b-728d7fb3ef95",
      lmCode: "16660687",
      quantity: 20,
      price: 50,
      type: "PRODUCT",
      isAVS: false,
      topEM: false,
      selected: false,
      title: "Сверло по дереву спиральное 3x60 мм Dexter SM321",
      barCodes: ["3276009969007"],
      priceUnit: "EA",
      logisticGrossWeight: 0.008,
      images: [
        "https://res.cloudinary.com/lmru/image/upload/LMCode/16660687.jpg",
      ],
      availableStock: 26,
      stockAdditionBySalesman: 0,
      reasonsForChangeGroup: null,
      barCode: "3276009969007",
      departmentId: "4",
      logistic: {
        weight: 0.008,
      },
      isComplementary: false,
      altPrice: null,
      altPriceUnit: null,
      recommendedPrice: 50,
      priceCurrency: "RUR",
    },
    {
      lineId: "e470fc17-03fa-4266-be5c-f8f165f286b3",
      lmCode: "82007932",
      quantity: 10,
      price: 65,
      type: "PRODUCT",
      isAVS: false,
      topEM: false,
      selected: false,
      title: "Бита Dexter Pro, PH2, 50 мм",
      barCodes: ["3276000591313"],
      priceUnit: "EA",
      logisticGrossWeight: 0.014,
      images: [
        "https://res.cloudinary.com/lmru/image/upload/LMCode/82007932.jpg",
      ],
      availableStock: 251,
      stockAdditionBySalesman: 0,
      reasonsForChangeGroup: null,
      barCode: "3276000591313",
      departmentId: "4",
      logistic: {
        weight: 0.014,
      },
      isComplementary: false,
      altPrice: null,
      altPriceUnit: null,
      recommendedPrice: 65,
      priceCurrency: "RUR",
    },
    {
      lineId: "90e826fa-503e-44b6-b52b-c76612f4dd49",
      lmCode: "15368334",
      quantity: 10,
      price: 166,
      type: "PRODUCT",
      isAVS: false,
      topEM: false,
      selected: false,
      title: "Рулетка Dexell 5 м х 19 мм с автостопом",
      barCodes: ["3254040044303"],
      priceUnit: "EA",
      logisticGrossWeight: 0.22,
      images: [
        "https://res.cloudinary.com/lmru/image/upload/LMCode/15368334.jpg",
      ],
      availableStock: 261,
      stockAdditionBySalesman: 0,
      reasonsForChangeGroup: null,
      barCode: "3254040044303",
      departmentId: "4",
      logistic: {
        weight: 0.22,
      },
      isComplementary: false,
      altPrice: null,
      altPriceUnit: null,
      recommendedPrice: 260,
      priceCurrency: "RUR",
    },
    {
      lineId: "5f36ee2e-cf12-45dc-bbb4-d1a6b0738683",
      lmCode: "18135430",
      quantity: 15,
      price: 68,
      type: "PRODUCT",
      isAVS: false,
      topEM: false,
      selected: false,
      title: "Нож Systec 18 мм, двухкомпонентная ручка",
      barCodes: ["3276000250104"],
      priceUnit: "EA",
      logisticGrossWeight: 0.066,
      images: [
        "https://res.cloudinary.com/lmru/image/upload/LMCode/18135430.jpg",
      ],
      availableStock: 387,
      stockAdditionBySalesman: 0,
      reasonsForChangeGroup: null,
      barCode: "3276000250104",
      departmentId: "4",
      logistic: {
        weight: 0.066,
      },
      isComplementary: false,
      altPrice: null,
      altPriceUnit: null,
      recommendedPrice: 77,
      priceCurrency: "RUR",
    },
    {
      lineId: "5f377676-9636-4e74-9ff0-b86ca4caeeff",
      lmCode: "66932362",
      quantity: 10,
      price: 95,
      type: "PRODUCT",
      isAVS: false,
      topEM: false,
      selected: false,
      title: "Лезвия универсальные Dexter 18 мм, 10 шт.",
      barCodes: ["3276000102526"],
      priceUnit: "EA",
      logisticGrossWeight: 0.084,
      images: [
        "https://res.cloudinary.com/lmru/image/upload/LMCode/66932362.jpg",
      ],
      availableStock: 79,
      stockAdditionBySalesman: 0,
      reasonsForChangeGroup: null,
      barCode: "3276000102526",
      departmentId: "4",
      logistic: {
        weight: 0.084,
      },
      isComplementary: false,
      altPrice: null,
      altPriceUnit: null,
      recommendedPrice: 95,
      priceCurrency: "RUR",
    },
    {
      lineId: "1a707a88-9743-481d-a913-a3f83df744b7",
      lmCode: "82586247",
      quantity: 20,
      price: 46,
      type: "PRODUCT",
      isAVS: false,
      topEM: false,
      selected: false,
      title: "Мини-валик велюр для лаков 60 мм",
      barCodes: ["4606800069689"],
      priceUnit: "EA",
      logisticGrossWeight: 0.01,
      images: [
        "https://res.cloudinary.com/lmru/image/upload/LMCode/82586247.jpg",
      ],
      availableStock: 70,
      stockAdditionBySalesman: 0,
      reasonsForChangeGroup: null,
      barCode: "4606800069689",
      departmentId: "11",
      logistic: {
        weight: 0.01,
      },
      isComplementary: false,
      altPrice: null,
      altPriceUnit: null,
      recommendedPrice: 46,
      priceCurrency: "RUR",
    },
    {
      lineId: "6499ab24-0564-44c7-87f8-416a01b75970",
      lmCode: "82800676",
      quantity: 20,
      price: 45,
      type: "PRODUCT",
      isAVS: false,
      topEM: false,
      selected: false,
      title: "Бюгель для валиков Dexter 60 мм, ø6 мм",
      barCodes: ["3276007193237"],
      priceUnit: "EA",
      logisticGrossWeight: 0.073,
      images: [
        "https://res.cloudinary.com/lmru/image/upload/LMCode/82800676.jpg",
      ],
      availableStock: 369,
      stockAdditionBySalesman: 0,
      reasonsForChangeGroup: null,
      barCode: "3276007193237",
      departmentId: "11",
      logistic: {
        weight: 0.073,
      },
      isComplementary: false,
      altPrice: null,
      altPriceUnit: null,
      recommendedPrice: 45,
      priceCurrency: "RUR",
    },
  ],
  documentVersion: 37,
  dateOfGiveAway: "2021-10-26T05:24:47.077Z",
  customers: [
    {
      customerId: "95b4782b-faf0-4525-8952-e13f79baa770",
      customerNumber: "000-304261",
      firstName: "ИП Тощев Федор Викторович",
      fullName: "ИП Тощев Федор Викторович ",
      phone: {
        primary: "+78412210839",
        secondary: "+78412210839",
      },
      type: "B2B",
      loyaltyCardNumber: "",
      role: "PAYER",
      roles: ["RECEIVER", "PAYER"],
    },
  ],
  deliveryType: "PICKUP",
  originStore: "048",
  relatedObjectId: "4df711b4-63b3-49a3-bbff-c07b521e0c7a",
};

const groupingResponse = {
  groupingId: "6176a5a7a50f884f24c6a777",
  originStore: "048",
  groupingScenario: "OFFLINE",
  lines: [
    {
      lineId: "a8ad017e-ab65-4b1f-b976-24d6af26f53b",
      type: "PRODUCT",
      itemReference: "12627652",
      quantity: 17,
      availableStock: 295,
      availableDate: "2021-10-26T05:24:47.077Z",
    },
    {
      lineId: "9fb7a427-e2f0-46b8-8bd7-64972bd4527c",
      type: "PRODUCT",
      itemReference: "82291405",
      quantity: 12,
      availableStock: 31,
      availableDate: "2021-10-26T05:24:47.077Z",
    },
    {
      lineId: "5a506a07-bac9-425b-9e35-61e890709cdb",
      type: "PRODUCT",
      itemReference: "82291547",
      quantity: 2,
      availableStock: 32,
      availableDate: "2021-10-26T05:24:47.077Z",
    },
    {
      lineId: "3e82359e-36ae-45cc-ae7a-c27ca66b7379",
      type: "PRODUCT",
      itemReference: "82232170",
      quantity: 2,
      availableStock: 39,
      availableDate: "2021-10-26T05:24:47.077Z",
    },
    {
      lineId: "de5ca1ae-ccf7-441e-92b0-0b45f8756e24",
      type: "PRODUCT",
      itemReference: "82699644",
      quantity: 2,
      availableStock: 2,
      availableDate: "2021-10-26T05:24:47.077Z",
    },
    {
      lineId: "3ab1932f-c97a-4194-9c1b-6d8f37a685ff",
      type: "PRODUCT",
      itemReference: "82239655",
      quantity: 3,
      availableStock: 23.433,
      availableDate: "2021-10-26T05:24:47.077Z",
    },
    {
      lineId: "6c3625da-e059-4314-ac35-ca42190daa94",
      type: "PRODUCT",
      itemReference: "81944738",
      quantity: 3,
      availableStock: 17,
      availableDate: "2021-10-26T05:24:47.077Z",
    },
    {
      lineId: "ce4486df-6ba4-4a04-97ec-9282bb9771f0",
      type: "PRODUCT",
      itemReference: "81944738",
      quantity: 1,
      availableStock: 17,
      availableDate: "2021-10-26T05:24:47.077Z",
    },
    {
      lineId: "b7f60c7b-2aff-40ab-896b-728d7fb3ef95",
      type: "PRODUCT",
      itemReference: "16660687",
      quantity: 20,
      availableStock: 26,
      availableDate: "2021-10-26T05:24:47.077Z",
    },
    {
      lineId: "6bb617d3-d0d7-4a9b-aa74-1de209874bf3",
      type: "PRODUCT",
      itemReference: "16660687",
      quantity: 1,
      availableStock: 26,
      availableDate: "2021-10-26T05:24:47.077Z",
    },
    {
      lineId: "e470fc17-03fa-4266-be5c-f8f165f286b3",
      type: "PRODUCT",
      itemReference: "82007932",
      quantity: 10,
      availableStock: 251,
      availableDate: "2021-10-26T05:24:47.077Z",
    },
    {
      lineId: "90e826fa-503e-44b6-b52b-c76612f4dd49",
      type: "PRODUCT",
      itemReference: "15368334",
      quantity: 10,
      availableStock: 261,
      availableDate: "2021-10-26T05:24:47.077Z",
    },
    {
      lineId: "5f36ee2e-cf12-45dc-bbb4-d1a6b0738683",
      type: "PRODUCT",
      itemReference: "18135430",
      quantity: 15,
      availableStock: 387,
      availableDate: "2021-10-26T05:24:47.077Z",
    },
    {
      lineId: "5f377676-9636-4e74-9ff0-b86ca4caeeff",
      type: "PRODUCT",
      itemReference: "66932362",
      quantity: 10,
      availableStock: 79,
      availableDate: "2021-10-26T05:24:47.077Z",
    },
    {
      lineId: "1a707a88-9743-481d-a913-a3f83df744b7",
      type: "PRODUCT",
      itemReference: "82586247",
      quantity: 20,
      availableStock: 70,
      availableDate: "2021-10-26T05:24:47.077Z",
    },
    {
      lineId: "6499ab24-0564-44c7-87f8-416a01b75970",
      type: "PRODUCT",
      itemReference: "82800676",
      quantity: 20,
      availableStock: 369,
      availableDate: "2021-10-26T05:24:47.077Z",
    },
  ],
  groups: [
    {
      groupId: "AVAILABLE_NOW",
      referenceLines: [
        "1a707a88-9743-481d-a913-a3f83df744b7",
        "3ab1932f-c97a-4194-9c1b-6d8f37a685ff",
        "3e82359e-36ae-45cc-ae7a-c27ca66b7379",
        "5a506a07-bac9-425b-9e35-61e890709cdb",
        "5f36ee2e-cf12-45dc-bbb4-d1a6b0738683",
        "5f377676-9636-4e74-9ff0-b86ca4caeeff",
        "6499ab24-0564-44c7-87f8-416a01b75970",
        "6bb617d3-d0d7-4a9b-aa74-1de209874bf3",
        "6c3625da-e059-4314-ac35-ca42190daa94",
        "90e826fa-503e-44b6-b52b-c76612f4dd49",
        "9fb7a427-e2f0-46b8-8bd7-64972bd4527c",
        "a8ad017e-ab65-4b1f-b976-24d6af26f53b",
        "b7f60c7b-2aff-40ab-896b-728d7fb3ef95",
        "ce4486df-6ba4-4a04-97ec-9282bb9771f0",
        "de5ca1ae-ccf7-441e-92b0-0b45f8756e24",
        "e470fc17-03fa-4266-be5c-f8f165f286b3",
      ],
    },
    {
      groupId: "ON_ORDER",
      referenceLines: [],
    },
    {
      groupId: "NOT_AVAILABLE",
      referenceLines: [],
    },
  ],
};

const getMissingOrderLines = function (
  { lines: groupingLines },
  { lines: postOrderLines }
) {
  return groupingLines.filter(
    (line) =>
      !postOrderLines.find((orderLine) => orderLine.lineId === line.lineId)
  );
};

console.log(getMissingOrderLines(groupingResponse, postOrderRequest));
